name: Deploy to GCS

on:
  push:
    branches:
      - main
jobs:
  deploy:
      runs-on: ubuntu-latest
      permissions:
        contents: 'read'
        id-token: 'write'
  
      steps:
      - id: 'checkout'
        uses: 'actions/checkout@v3'
  
      - id: 'auth'
        uses: 'google-github-actions/auth@v1'
        with:
          service_account: ${{ secrets.GCP_SA }}
  
      - id: 'upload-file'
        uses: 'google-github-actions/upload-cloud-storage@v1'
        with:
          path: .
          destination: ${{ secrets.GCP_BUCKET }}
  
